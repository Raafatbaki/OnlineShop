{"ast":null,"code":"var _jsxFileName = \"L:\\\\Raafat\\\\OnlineShop\\\\front-end\\\\src\\\\Pages\\\\Auth\\\\Authrequired.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport Cookie from \"cookie-universal\";\nimport { useEffect, useState } from \"react\";\nimport { Outlet, Navigate, useParams, useNavigate } from \"react-router-dom\";\nimport { baseUrl } from \"../../Api/Api\";\nimport { AdminAuth } from \"../../Api/Api\";\nimport LoadingSubmit from \"../../components/Loading/Loading\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Authrequired() {\n  _s();\n  const [userExict, setUser] = useState(\"\");\n  const cookie = Cookie();\n  const token = cookie.get(\"admin-token\");\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        var response = await axios.post(`${baseUrl}/${AdminAuth}`, JSON.stringify(token), {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            \"Content-Type\": \"application/json\"\n          }\n        });\n        if (response.status === 200) {\n          setUser(response.data.email);\n        } else if (response.status === 401) {\n          /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/loginAdmin\",\n            replace: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 11\n          }, this);\n        } else {\n          navigate(\"/dashboard\", {\n            replace: true\n          });\n        }\n      } catch (error) {\n        /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/loginAdmin\",\n          replace: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 9\n        }, this);\n      }\n    };\n    fetchData();\n  }, []);\n  return token ? userExict === \"\" ? /*#__PURE__*/_jsxDEV(LoadingSubmit, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 7\n  }, this) : /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 7\n  }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/loginAdmin\",\n    replace: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(Authrequired, \"CyomUG7d2gfpfEVjGIeHTjkMtYw=\", false, function () {\n  return [useNavigate];\n});\n_c = Authrequired;\nvar _c;\n$RefreshReg$(_c, \"Authrequired\");","map":{"version":3,"names":["axios","Cookie","useEffect","useState","Outlet","Navigate","useParams","useNavigate","baseUrl","AdminAuth","LoadingSubmit","jsxDEV","_jsxDEV","Authrequired","_s","userExict","setUser","cookie","token","get","navigate","fetchData","response","post","JSON","stringify","headers","Authorization","status","data","email","to","replace","fileName","_jsxFileName","lineNumber","columnNumber","error","_c","$RefreshReg$"],"sources":["L:/Raafat/OnlineShop/front-end/src/Pages/Auth/Authrequired.js"],"sourcesContent":["import axios from \"axios\";\r\nimport Cookie from \"cookie-universal\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Outlet, Navigate, useParams, useNavigate } from \"react-router-dom\";\r\nimport { baseUrl } from \"../../Api/Api\";\r\nimport { AdminAuth } from \"../../Api/Api\";\r\nimport LoadingSubmit from \"../../components/Loading/Loading\";\r\n\r\nexport default function Authrequired() {\r\n  const [userExict, setUser] = useState(\"\");\r\n  const cookie = Cookie();\r\n  const token = cookie.get(\"admin-token\");\r\n  const navigate = useNavigate();\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        var response = await axios.post(\r\n          `${baseUrl}/${AdminAuth}`,\r\n          JSON.stringify(token),\r\n          {\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          }\r\n        );\r\n        if (response.status === 200) {\r\n          setUser(response.data.email);\r\n        } else if (response.status === 401) {\r\n          <Navigate to={\"/loginAdmin\"} replace={true} />;\r\n        } else {\r\n          navigate(\"/dashboard\", { replace: true });\r\n        }\r\n      } catch (error) {\r\n        <Navigate to={\"/loginAdmin\"} replace={true} />;\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  return token ? (\r\n    userExict === \"\" ? (\r\n      <LoadingSubmit />\r\n    ) : (\r\n      <Outlet />\r\n    )\r\n  ) : (\r\n    <Navigate to={\"/loginAdmin\"} replace={true} />\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,kBAAkB;AACrC,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,MAAM,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AAC3E,SAASC,OAAO,QAAQ,eAAe;AACvC,SAASC,SAAS,QAAQ,eAAe;AACzC,OAAOC,aAAa,MAAM,kCAAkC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7D,eAAe,SAASC,YAAYA,CAAA,EAAG;EAAAC,EAAA;EACrC,MAAM,CAACC,SAAS,EAAEC,OAAO,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACzC,MAAMc,MAAM,GAAGhB,MAAM,CAAC,CAAC;EACvB,MAAMiB,KAAK,GAAGD,MAAM,CAACE,GAAG,CAAC,aAAa,CAAC;EACvC,MAAMC,QAAQ,GAAGb,WAAW,CAAC,CAAC;EAC9BL,SAAS,CAAC,MAAM;IACd,MAAMmB,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACF,IAAIC,QAAQ,GAAG,MAAMtB,KAAK,CAACuB,IAAI,CAC5B,GAAEf,OAAQ,IAAGC,SAAU,EAAC,EACzBe,IAAI,CAACC,SAAS,CAACP,KAAK,CAAC,EACrB;UACEQ,OAAO,EAAE;YACPC,aAAa,EAAG,UAAST,KAAM,EAAC;YAChC,cAAc,EAAE;UAClB;QACF,CACF,CAAC;QACD,IAAII,QAAQ,CAACM,MAAM,KAAK,GAAG,EAAE;UAC3BZ,OAAO,CAACM,QAAQ,CAACO,IAAI,CAACC,KAAK,CAAC;QAC9B,CAAC,MAAM,IAAIR,QAAQ,CAACM,MAAM,KAAK,GAAG,EAAE;UAClC,aAAAhB,OAAA,CAACP,QAAQ;YAAC0B,EAAE,EAAE,aAAc;YAACC,OAAO,EAAE;UAAK;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAChD,CAAC,MAAM;UACLhB,QAAQ,CAAC,YAAY,EAAE;YAAEY,OAAO,EAAE;UAAK,CAAC,CAAC;QAC3C;MACF,CAAC,CAAC,OAAOK,KAAK,EAAE;QACd,aAAAzB,OAAA,CAACP,QAAQ;UAAC0B,EAAE,EAAE,aAAc;UAACC,OAAO,EAAE;QAAK;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAChD;IACF,CAAC;IAEDf,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOH,KAAK,GACVH,SAAS,KAAK,EAAE,gBACdH,OAAA,CAACF,aAAa;IAAAuB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC,gBAEjBxB,OAAA,CAACR,MAAM;IAAA6B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CACV,gBAEDxB,OAAA,CAACP,QAAQ;IAAC0B,EAAE,EAAE,aAAc;IAACC,OAAO,EAAE;EAAK;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAC9C;AACH;AAACtB,EAAA,CA1CuBD,YAAY;EAAA,QAIjBN,WAAW;AAAA;AAAA+B,EAAA,GAJNzB,YAAY;AAAA,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}